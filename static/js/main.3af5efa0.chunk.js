(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(20)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(6),s=n.n(r),l=(n(14),n(1)),u=(n(15),n(16),function(e){var t=e.onGameStarted,n=e.display,r=Object(a.useState)(10),s=Object(l.a)(r,2),u=s[0],c=s[1],o=Object(a.useState)(10),f=Object(l.a)(o,2),m=f[0],d=f[1],h=Object(a.useState)(4),v=Object(l.a)(h,2),g=v[0],p=v[1],b="string"===typeof n?i.a.createElement("div",{className:"Menu-message"},n):null;return i.a.createElement("div",{className:"Menu",style:{display:!1!==n?"flex":"none"}},i.a.createElement("div",{className:"Menu-panel"},b,i.a.createElement("div",{className:"Menu-field"},i.a.createElement("label",{htmlFor:"width"},"Width"),i.a.createElement("input",{id:"width",type:"number",min:"1",max:"300",placeholder:"",value:u,onChange:function(e){c(parseInt(e.target.value||"0",10))}})),i.a.createElement("div",{className:"Menu-field"},i.a.createElement("label",{htmlFor:"height"},"Height"),i.a.createElement("input",{id:"height",type:"number",min:"1",max:"300",value:m,onChange:function(e){d(parseInt(e.target.value||"0",10))}})),i.a.createElement("div",{className:"Menu-field"},i.a.createElement("label",{htmlFor:"mines"},"Mines"),i.a.createElement("input",{id:"mines",type:"number",min:"1",max:"9000",placeholder:"",value:g,onChange:function(e){p(parseInt(e.target.value||"0",10))}})),i.a.createElement("div",{className:"Menu-field"},i.a.createElement("div",{className:"Menu-btn",onClick:function(){return t(u,m,g)}},"New game"))))}),c=(n(17),function(e){var t=e.flagsCount,n=e.onMenuButtonClick;return i.a.createElement("div",{className:"Panel"},i.a.createElement("div",{className:"Panel-menu-btn",onClick:n},"New game"),i.a.createElement("div",{className:"Panel-flags"},t," \u2691 "))}),o=n(8),f=(n(18),function(e){var t=e.x,n=e.y,a=e.isMine,r=e.isOpen,s=e.isFlagged,l=e.minesAround,u=e.onClick,c=["Tile"],o="";return r&&a?o="\ud83d\udca3":r&&!a?o=l+"":!r&&s&&(o="\u2691",c.push("Tile--flagged")),r&&c.push("Tile--is-open"),i.a.createElement("div",{className:c.join(" "),onClick:function(e){u(t,n,e.shiftKey)}},i.a.createElement("div",{className:"Tile-content"},o))}),m=(n(19),n(7)),d=n(4),h=function e(t){Object(d.a)(this,e),this.value=void 0,this.next=null,this.value=t,this.next=null},v=function(){function e(){Object(d.a)(this,e),this.first=null,this.last=null,this.size=0}return Object(m.a)(e,[{key:"enqueue",value:function(e){var t=new h(e);return this.first?(this.last&&(this.last.next=t),this.last=t):(this.first=t,this.last=t),++this.size}},{key:"dequeue",value:function(){if(!this.first)return null;var e=this.first;return this.first===this.last&&(this.last=null),this.first=this.first.next,this.size--,e.value}}]),e}(),g=function(e){var t=e.width,n=e.height,r=e.mines,s=e.startedAt,u=e.onFlagsChanged,c=e.onMineRevealed,m=e.onAllMinesFlagged,d=Object(a.useState)(null),h=Object(l.a)(d,2),g=h[0],p=h[1];Object(a.useEffect)((function(){var e=N(t,n,r),a=w(t,n,(function(t,n){return{x:t,y:n,minesAround:M(e,t,n),isMine:j(e,t,n),isFlagged:!1,isOpen:!1}}));p(a)}),[t,n,r,s]);var b=function(e,t,n){if(g&&g[t]&&g[t][e]){var a=g[t][e];!a.isOpen&&n?a.isFlagged?(a.isFlagged=!1,u(1)):(a.isFlagged=!0,O()&&m(),u(-1)):a.isOpen||a.isFlagged||(a.isOpen=!0,a.isMine?c():0===a.minesAround&&E(e,t)),p(Object(o.a)(g))}},O=function(){var e=0;return g&&g.forEach((function(t){return t.forEach((function(t){t.isMine&&t.isFlagged&&e++}))})),e===r},E=function(e,t){var n=new v;for(n.enqueue([e,t]);n.size>0;){var a=n.dequeue();if(a)for(var i=Object(l.a)(a,2),r=i[0],s=i[1],u=-1;u<=1;u++)for(var c=-1;c<=1;c++)if(0!==c||0!==u){var o=r+u,f=s+c;if(g&&g[f]&&g[f][o]){var m=g[f][o];m.isOpen||0!==m.minesAround||(m.isOpen=!0,n.enqueue([o,f]))}}}return g},j=function(e,t,n){return!!e[t+"-"+n]},M=function(e,t,n){for(var a=0,i=-1;i<=1;i++)for(var r=-1;r<=1;r++)0===r&&0===i||j(e,t+i,n+r)&&a++;return a},w=function(e,t,n){for(var a=[],i=0;i<t;i++){for(var r=[],s=0;s<e;s++)r.push(n(s,i));a.push(r)}return a},N=function(e,t,n){for(var a=function(e){return Math.round(Math.random()*(e-1))},i={};n>0;){var r=a(e),s=a(t);j(i,r,s)||(i[r+"-"+s]=!0,n--)}return i};return i.a.createElement("div",{key:"Minefield",className:"Minefield"},null===g?null:g.map((function(e,t){return i.a.createElement("div",{className:"Minifield-row",key:t},e.map((function(e){return i.a.createElement(f,Object.assign({key:e.x+"-"+e.y},e,{onClick:b}))})))})))},p=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),o=Object(l.a)(s,2),f=o[0],m=o[1],d=Object(a.useState)(0),h=Object(l.a)(d,2),v=h[0],p=h[1],b=Object(a.useState)(0),O=Object(l.a)(b,2),E=O[0],j=O[1],M=Object(a.useState)(new Date),w=Object(l.a)(M,2),N=w[0],y=w[1],k=Object(a.useState)(!0),C=Object(l.a)(k,2),F=C[0],S=C[1];return i.a.createElement("div",{className:"App"},i.a.createElement(u,{onGameStarted:function(e,t,n){n>e*t&&(n=e*t),r(e),m(t),p(n),j(n),y(new Date),S(!1)},display:F}),i.a.createElement("div",{className:"App-board"},i.a.createElement(c,{onMenuButtonClick:function(){S(!0)},flagsCount:E}),i.a.createElement(g,{width:n,height:f,mines:v,startedAt:N,onFlagsChanged:function(e){var t=E+e;if(t<0)return alert("No flags available");j((function(e){return t>=0?t:0}))},onMineRevealed:function(){S("\ud83d\udca5You blown up!")},onAllMinesFlagged:function(){S("\ud83c\udfc6 You win!")}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.3af5efa0.chunk.js.map